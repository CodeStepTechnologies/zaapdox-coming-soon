<script>

const SUPABASE_URL = "wkymwlhrjgneqzcnqkvx";
const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndreW13bGhyamduZXF6Y25xa3Z4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5NTAzMzgsImV4cCI6MjA4NzUyNjMzOH0.mMOE_rZdlVvC7-0mwc5KoUgWlj61oEezhwGaiiDDSUA";

document.getElementById("waitlist-form").addEventListener("submit", async function(e) {

  e.preventDefault();

  const full_name = document.getElementById("name").value;
  const email = document.getElementById("email").value;
  const phone = document.getElementById("phone").value;
  const user_type = document.getElementById("user_type").value;
  const city = document.getElementById("city").value;

  const response = await fetch(SUPABASE_URL + "/rest/v1/waitlist", {

    method: "POST",

    headers: {
      "Content-Type": "application/json",
      "apikey": SUPABASE_KEY,
      "Authorization": "Bearer " + SUPABASE_KEY
    },

    body: JSON.stringify({
      full_name,
      email,
      phone,
      user_type,
      city
    })

  });

  if(response.ok) {

    document.getElementById("message").innerText =
      "Registration successful.";

  } else {

    document.getElementById("message").innerText =
      "Error. Try again.";

  }

});

</script>